(window.webpackJsonpwebpackLogReporter=window.webpackJsonpwebpackLogReporter||[]).push([[6],{84:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(10)),i=r(o(2));function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))try{throw new TypeError("Cannot call a class as a function")}catch(e){}}(this,e),this.scrollDivClass="report-scroll-module",this.scrollSubDivClass="report-scroll-sub-module",this.ignoreHidden=t,this.scrollLintenerFns=[],this.reportedIds=[],this.checkScroll()}var t,o,r;return t=e,(o=[{key:"getOffset1",value:function(e){var t={top:0,left:0};return"function"==typeof e.getBoundingClientRect&&(t=e.getBoundingClientRect()),{top:t.top+(window.pageYOffset||e.scrollTop)-(e.clientTop||0),left:t.left+(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}}},{key:"judgeHidden",value:function(e){for(var t=e;t!==document.body;){if(window.getComputedStyle(t)&&"none"===window.getComputedStyle(t).display)return!0;t=t.parentNode}return!1}},{key:"inView",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var t=window.screen.availHeight,o=e.getBoundingClientRect();return o.top>=0&&t-o.top>200||o.top<0&&o.bottom>=200}var n=document.documentElement||document.body.parentNode||document.body,i=window.pageYOffset?window.pageYOffset:n.scrollTop,r=this.getOffset1(e).top,l=(e.getBoundingClientRect().height,window.screen.availHeight);return r>=i&&r+200<i+l}},{key:"subInView",value:function(e,t){var o=t.getBoundingClientRect(),n=e.getBoundingClientRect();return n.top>0&&n.top-o.top<o.height-200}},{key:"judgeAppear",value:function(){for(var e=document.querySelectorAll("."+this.scrollDivClass),t=0;t<e.length;t++){e[t].getAttribute("scrollshow")||this.ignoreHidden&&this.judgeHidden(e[t])||this.inView(e[t])&&(e[t].setAttribute("scrollshow",!0),this.todo(e[t].id,t))}}},{key:"judgeSubAppear",value:function(e){if(this.inView(e,!0))for(var t=e.querySelectorAll("."+this.scrollSubDivClass),o=0,n=t.length;o<n;o++){t[o].getAttribute("scrollshow")||this.ignoreHidden&&this.judgeHidden(t[o])||this.subInView(t[o],e)&&(t[o].setAttribute("scrollshow",!0),-1==this.reportedIds.indexOf(t[o].id)&&this.reportedIds.push(t[o].id),this.todo(t[o].id,o))}}},{key:"checkScroll",value:function(){var e=this;e.judgeAppear(),window.addEventListener("scroll",i.default.throttleV2(function(){e.judgeAppear()},100,200),!1)}},{key:"addScrollListenNode",value:function(e){var t=this;t.judgeSubAppear(e);var o=i.default.throttleV2(function(){t.judgeSubAppear(e)},100,200);this.scrollLintenerFns.push(o),e.addEventListener("scroll",o,!1)}},{key:"removeScrollListenNode",value:function(e){this.scrollLintenerFns.forEach(function(t){e.removeEventListener("scroll",t)})}},{key:"todo",value:function(e,t){var o=n.default.spmPrefix+".",i={};i.spm_id=o+e+".0",i.timestamp=(new Date).getTime(),i.msg=JSON.stringify({num:t+1,name:"report-scroll-module"}),n.default.receiveGroupMsg({type:"appear",obj:i})}}])&&l(t.prototype,o),r&&l(t,r),e}();t.default=s}}]);